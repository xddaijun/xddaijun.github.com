---
layout: default
title: Pinyin to Character
---
h1. Pinyin to Character

<p>用户输入拼音对拼音进行识别，一向是输入法来做的事情。在这里调用QQ的云端输入法来对输入的拼音进行识别，从而具备很高的匹配率。</p>
<p>代码如下，详见 &nbsp;<a href="https://github.com/xddaijun/somecode/blob/master/pycharacter/getwords.py">https://github.com/xddaijun/somecode/blob/master/pycharacter/getwords.py</a></p>
     <div style="background:#fdfdfd;color:black;"><u>Python语言</u>: <a href="http://fayaa.com/code/view//">临时自用代码</a></div>
     <div class="source" style="font-family: '[object HTMLOptionElement]', 'Courier New'; color: rgb(245, 222, 179); background-color: rgb(47, 79, 79); "><span style="color: rgb(218, 112, 214); ">01</span> <span style="color: rgb(218, 112, 214); "># -*- coding: utf-8 -*-</span><br><span style="color: rgb(218, 112, 214); ">02</span> <span style="color: rgb(127, 255, 212); ">&quot;&quot;"</span><br><span style="color: rgb(218, 112, 214); ">03</span> <span style="color: rgb(127, 255, 212); ">Created on Sat Jun 25 16:37:12 2011</span><br><span style="color: rgb(218, 112, 214); ">04</span> <br><span style="color: rgb(248, 16, 176); ">05</span> <span style="color: rgb(127, 255, 212); ">@author: mark</span><br><span style="color: rgb(218, 112, 214); ">06</span> <span style="color: rgb(127, 255, 212); ">&quot;&quot;"</span><br><span style="color: rgb(218, 112, 214); ">07</span> <br><span style="color: rgb(218, 112, 214); ">08</span> <span style="color: rgb(245, 222, 179); ">from</span> <span style="color: rgb(245, 222, 179); ">urllib</span> <span style="color: rgb(245, 222, 179); ">import</span> <span style="color: rgb(245, 222, 179); ">urlopen</span><br><span style="color: rgb(218, 112, 214); ">09</span> <span style="color: rgb(245, 222, 179); ">import</span> <span style="color: rgb(245, 222, 179); ">simplejson</span> <span style="color: rgb(245, 222, 179); ">as</span> <span style="color: rgb(245, 222, 179); ">json</span><br><span style="color: rgb(248, 16, 176); ">10</span> <span style="color: rgb(245, 222, 179); ">import</span> <span style="color: rgb(245, 222, 179); ">time</span><br><span style="color: rgb(218, 112, 214); ">11</span> <span style="color: rgb(245, 222, 179); ">import</span> <span style="color: rgb(245, 222, 179); ">re</span><br><span style="color: rgb(218, 112, 214); ">12</span> <br><span style="color: rgb(218, 112, 214); ">13</span> <br><span style="color: rgb(218, 112, 214); ">14</span> <span style="color: rgb(176, 196, 222); font-weight: bold; ">def</span> <span style="color: rgb(255, 255, 255); ">getQQWords</span>(<span style="color: rgb(245, 222, 179); ">preword</span><span style="color: rgb(245, 222, 179); ">,</span><span style="color: rgb(245, 222, 179); ">pys</span><span style="color: rgb(245, 222, 179); ">,</span><span style="color: rgb(245, 222, 179); ">curNum</span><span style="color: rgb(245, 222, 179); ">):</span> <br><span style="color: rgb(248, 16, 176); ">15</span> &nbsp;&nbsp;&nbsp; <span style="color: rgb(176, 196, 222); font-weight: bold; ">global</span> <span style="color: rgb(245, 222, 179); ">wordsSet</span>&nbsp;&nbsp;&nbsp; <br><span style="color: rgb(218, 112, 214); ">16</span> &nbsp;&nbsp;&nbsp; <span style="color: rgb(176, 196, 222); font-weight: bold; ">if</span>(<span style="color: rgb(176, 196, 222); font-weight: bold; ">len</span>(<span style="color: rgb(245, 222, 179); ">pys</span>)<span style="color: rgb(245, 222, 179); ">&lt;</span><span style="color: rgb(173, 216, 230); ">1</span> <span style="color: rgb(176, 196, 222); font-weight: bold; ">and</span> <span style="color: rgb(245, 222, 179); ">preword</span> <span style="color: rgb(176, 196, 222); font-weight: bold; ">not</span> <span style="color: rgb(176, 196, 222); font-weight: bold; ">in</span> <span style="color: rgb(245, 222, 179); ">wordsSet</span><span style="color: rgb(245, 222, 179); ">):</span>&nbsp;&nbsp;&nbsp;&nbsp; <br><span style="color: rgb(218, 112, 214); ">17</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(245, 222, 179); ">wordsSet</span><span style="color: rgb(245, 222, 179); ">.</span><span style="color: rgb(245, 222, 179); ">append</span>(<span style="color: rgb(245, 222, 179); ">preword</span>)<br><span style="color: rgb(218, 112, 214); ">18</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(176, 196, 222); font-weight: bold; ">return</span><br><span style="color: rgb(218, 112, 214); ">19</span> &nbsp;&nbsp;&nbsp; <span style="color: rgb(176, 196, 222); font-weight: bold; ">if</span> <span style="color: rgb(245, 222, 179); ">curNum</span><span style="color: rgb(245, 222, 179); ">&gt;</span><span style="color: rgb(173, 216, 230); ">1</span><span style="color: rgb(245, 222, 179); ">:</span><br><span style="color: rgb(248, 16, 176); ">20</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(245, 222, 179); ">nextNum</span><span style="color: rgb(245, 222, 179); ">=</span><span style="color: rgb(245, 222, 179); ">curNum</span><span style="color: rgb(245, 222, 179); ">-</span><span style="color: rgb(173, 216, 230); ">1</span><br><span style="color: rgb(218, 112, 214); ">21</span> &nbsp;&nbsp;&nbsp; <span style="color: rgb(176, 196, 222); font-weight: bold; ">else</span><span style="color: rgb(245, 222, 179); ">:</span><br><span style="color: rgb(218, 112, 214); ">22</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(245, 222, 179); ">nextNum</span><span style="color: rgb(245, 222, 179); ">=</span><span style="color: rgb(173, 216, 230); ">1</span><br><span style="color: rgb(218, 112, 214); ">23</span> &nbsp;&nbsp;&nbsp; <span style="color: rgb(245, 222, 179); ">pylen</span><span style="color: rgb(245, 222, 179); ">=</span><span style="color: rgb(176, 196, 222); font-weight: bold; ">len</span>(<span style="color: rgb(245, 222, 179); ">pys</span>)<br><span style="color: rgb(218, 112, 214); ">24</span> &nbsp;&nbsp;&nbsp; <span style="color: rgb(245, 222, 179); ">sout</span><span style="color: rgb(245, 222, 179); ">=</span><span style="color: rgb(245, 222, 179); ">json</span><span style="color: rgb(245, 222, 179); ">.</span><span style="color: rgb(245, 222, 179); ">load</span>(<span style="color: rgb(245, 222, 179); ">urlopen</span>(<span style="color: rgb(127, 255, 212); ">&quot;http://ime.qq.com/fcgi-bin/getword?q=</span><span style="color: rgb(127, 255, 212); ">%s</span><span style="color: rgb(127, 255, 212); ">&quot;</span> <span style="color: rgb(245, 222, 179); ">%</span> <span style="color: rgb(245, 222, 179); ">pys</span>))<br><span style="color: rgb(248, 16, 176); ">25</span> &nbsp;&nbsp;&nbsp; <span style="color: rgb(245, 222, 179); ">ix</span><span style="color: rgb(245, 222, 179); ">=</span><span style="color: rgb(173, 216, 230); ">0</span><br><span style="color: rgb(218, 112, 214); ">26</span> &nbsp;&nbsp;&nbsp; <span style="color: rgb(176, 196, 222); font-weight: bold; ">while</span>(<span style="color: rgb(245, 222, 179); ">pylen</span><span style="color: rgb(245, 222, 179); ">&gt;=</span><span style="color: rgb(173, 216, 230); ">1</span> <span style="color: rgb(176, 196, 222); font-weight: bold; ">and</span> <span style="color: rgb(245, 222, 179); ">ix</span><span style="color: rgb(245, 222, 179); ">&lt;</span><span style="color: rgb(245, 222, 179); ">curNum</span><span style="color: rgb(245, 222, 179); ">):</span><br><span style="color: rgb(218, 112, 214); ">27</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(245, 222, 179); ">getQQWords</span>(<span style="color: rgb(245, 222, 179); ">preword</span><span style="color: rgb(245, 222, 179); ">+</span><span style="color: rgb(245, 222, 179); ">sout</span><span style="color: rgb(245, 222, 179); ">[</span><span style="color: rgb(127, 255, 212); ">&#39;rs&#39;</span><span style="color: rgb(245, 222, 179); ">][</span><span style="color: rgb(245, 222, 179); ">ix</span><span style="color: rgb(245, 222, 179); ">],</span><span style="color: rgb(245, 222, 179); ">pys</span><span style="color: rgb(245, 222, 179); ">[</span><span style="color: rgb(176, 196, 222); font-weight: bold; ">int</span>(<span style="color: rgb(245, 222, 179); ">sout</span><span style="color: rgb(245, 222, 179); ">[</span><span style="color: rgb(127, 255, 212); ">&#39;rsn&#39;</span><span style="color: rgb(245, 222, 179); ">][</span><span style="color: rgb(245, 222, 179); ">ix</span><span style="color: rgb(245, 222, 179); ">]):],</span><span style="color: rgb(245, 222, 179); ">nextNum</span>)<br><span style="color: rgb(218, 112, 214); ">28</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(245, 222, 179); ">ix</span><span style="color: rgb(245, 222, 179); ">=</span><span style="color: rgb(245, 222, 179); ">ix</span><span style="color: rgb(245, 222, 179); ">+</span><span style="color: rgb(173, 216, 230); ">1</span><br><span style="color: rgb(218, 112, 214); ">29</span> <br><span style="color: rgb(248, 16, 176); ">30</span> <span style="color: rgb(176, 196, 222); font-weight: bold; ">def</span> <span style="color: rgb(255, 255, 255); ">parsePY</span>(<span style="color: rgb(245, 222, 179); ">inputStr</span><span style="color: rgb(245, 222, 179); ">):</span><br><span style="color: rgb(218, 112, 214); ">31</span> &nbsp;&nbsp;&nbsp; <span style="color: rgb(176, 196, 222); font-weight: bold; ">global</span> <span style="color: rgb(245, 222, 179); ">wordsSet</span>&nbsp;&nbsp;&nbsp; <br><span style="color: rgb(218, 112, 214); ">32</span> &nbsp;&nbsp;&nbsp; <span style="color: rgb(245, 222, 179); ">outwords</span><span style="color: rgb(245, 222, 179); ">=</span><span style="color: rgb(245, 222, 179); ">[]</span><br><span style="color: rgb(218, 112, 214); ">33</span> &nbsp;&nbsp;&nbsp; <span style="color: rgb(245, 222, 179); ">match</span> <span style="color: rgb(245, 222, 179); ">=</span> <span style="color: rgb(245, 222, 179); ">re</span><span style="color: rgb(245, 222, 179); ">.</span><span style="color: rgb(245, 222, 179); ">search</span>(<span style="color: rgb(127, 255, 212); ">r&#39;^[a-zA-Z</span><span style="color: rgb(127, 255, 212); ">\&#39;</span><span style="color: rgb(127, 255, 212); ">\s]+$&#39;</span><span style="color: rgb(245, 222, 179); ">,</span> <span style="color: rgb(245, 222, 179); ">inputStr</span>)<br><span style="color: rgb(218, 112, 214); ">34</span> &nbsp;&nbsp;&nbsp; <span style="color: rgb(176, 196, 222); font-weight: bold; ">if</span> <span style="color: rgb(245, 222, 179); ">match</span><span style="color: rgb(245, 222, 179); ">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br><span style="color: rgb(248, 16, 176); ">35</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(245, 222, 179); ">matches</span><span style="color: rgb(245, 222, 179); ">=</span><span style="color: rgb(245, 222, 179); ">re</span><span style="color: rgb(245, 222, 179); ">.</span><span style="color: rgb(245, 222, 179); ">split</span>(<span style="color: rgb(127, 255, 212); ">&quot;\s&quot;</span><span style="color: rgb(245, 222, 179); ">,</span><span style="color: rgb(245, 222, 179); ">inputStr</span>)<br><span style="color: rgb(218, 112, 214); ">36</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(245, 222, 179); ">ix</span><span style="color: rgb(245, 222, 179); ">=</span><span style="color: rgb(173, 216, 230); ">0</span><br><span style="color: rgb(218, 112, 214); ">37</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(176, 196, 222); font-weight: bold; ">if</span> <span style="color: rgb(176, 196, 222); font-weight: bold; ">len</span>(<span style="color: rgb(245, 222, 179); ">matches</span>)<span style="color: rgb(245, 222, 179); ">&gt;</span><span style="color: rgb(173, 216, 230); ">1</span><span style="color: rgb(245, 222, 179); ">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br><span style="color: rgb(218, 112, 214); ">38</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(245, 222, 179); ">outwords</span><span style="color: rgb(245, 222, 179); ">.</span><span style="color: rgb(245, 222, 179); ">append</span>(<span style="color: rgb(127, 255, 212); ">&quot;&quot;</span>)<br><span style="color: rgb(218, 112, 214); ">39</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(176, 196, 222); font-weight: bold; ">while</span> <span style="color: rgb(245, 222, 179); ">ix</span><span style="color: rgb(245, 222, 179); ">&lt;</span><span style="color: rgb(176, 196, 222); font-weight: bold; ">len</span>(<span style="color: rgb(245, 222, 179); ">matches</span><span style="color: rgb(245, 222, 179); ">):</span><br><span style="color: rgb(248, 16, 176); ">40</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(245, 222, 179); ">wordsSet</span><span style="color: rgb(245, 222, 179); ">=</span><span style="color: rgb(245, 222, 179); ">[]</span><br><span style="color: rgb(218, 112, 214); ">41</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(245, 222, 179); ">getQQWords</span>(<span style="color: rgb(127, 255, 212); ">&quot;&quot;</span><span style="color: rgb(245, 222, 179); ">,</span><span style="color: rgb(245, 222, 179); ">matches</span><span style="color: rgb(245, 222, 179); ">[</span><span style="color: rgb(245, 222, 179); ">ix</span><span style="color: rgb(245, 222, 179); ">],</span><span style="color: rgb(173, 216, 230); ">1</span>)<br><span style="color: rgb(218, 112, 214); ">42</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(245, 222, 179); ">outwords</span><span style="color: rgb(245, 222, 179); ">[</span><span style="color: rgb(173, 216, 230); ">0</span><span style="color: rgb(245, 222, 179); ">]</span><span style="color: rgb(245, 222, 179); ">=</span><span style="color: rgb(245, 222, 179); ">outwords</span><span style="color: rgb(245, 222, 179); ">[</span><span style="color: rgb(173, 216, 230); ">0</span><span style="color: rgb(245, 222, 179); ">]</span><span style="color: rgb(245, 222, 179); ">+</span><span style="color: rgb(245, 222, 179); ">wordsSet</span><span style="color: rgb(245, 222, 179); ">[</span><span style="color: rgb(173, 216, 230); ">0</span><span style="color: rgb(245, 222, 179); ">]</span><span style="color: rgb(245, 222, 179); ">+</span><span style="color: rgb(127, 255, 212); ">&quot; &quot;</span><br><span style="color: rgb(218, 112, 214); ">43</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(245, 222, 179); ">ix</span><span style="color: rgb(245, 222, 179); ">=</span><span style="color: rgb(245, 222, 179); ">ix</span><span style="color: rgb(245, 222, 179); ">+</span><span style="color: rgb(173, 216, 230); ">1</span><br><span style="color: rgb(218, 112, 214); ">44</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(176, 196, 222); font-weight: bold; ">else</span><span style="color: rgb(245, 222, 179); ">:</span><br><span style="color: rgb(248, 16, 176); ">45</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(245, 222, 179); ">wordsSet</span><span style="color: rgb(245, 222, 179); ">=</span><span style="color: rgb(245, 222, 179); ">[]</span><br><span style="color: rgb(218, 112, 214); ">46</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(245, 222, 179); ">getQQWords</span>(<span style="color: rgb(127, 255, 212); ">&quot;&quot;</span><span style="color: rgb(245, 222, 179); ">,</span><span style="color: rgb(245, 222, 179); ">matches</span><span style="color: rgb(245, 222, 179); ">[</span><span style="color: rgb(245, 222, 179); ">ix</span><span style="color: rgb(245, 222, 179); ">],</span><span style="color: rgb(173, 216, 230); ">3</span>)<br><span style="color: rgb(218, 112, 214); ">47</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(245, 222, 179); ">outwords</span><span style="color: rgb(245, 222, 179); ">=</span><span style="color: rgb(245, 222, 179); ">wordsSet</span><br><span style="color: rgb(218, 112, 214); ">48</span> &nbsp;&nbsp;&nbsp; <span style="color: rgb(176, 196, 222); font-weight: bold; ">return</span> <span style="color: rgb(245, 222, 179); ">outwords</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br><span style="color: rgb(218, 112, 214); ">49</span> <br><span style="color: rgb(248, 16, 176); ">50</span> <span style="color: rgb(176, 196, 222); font-weight: bold; ">def</span> <span style="color: rgb(255, 255, 255); ">main</span><span style="color: rgb(245, 222, 179); ">():</span><br><span style="color: rgb(218, 112, 214); ">51</span> &nbsp;&nbsp;&nbsp; <span style="color: rgb(176, 196, 222); font-weight: bold; ">for</span> <span style="color: rgb(245, 222, 179); ">w</span> <span style="color: rgb(176, 196, 222); font-weight: bold; ">in</span> <span style="color: rgb(245, 222, 179); ">parsePY</span>(<span style="color: rgb(127, 255, 212); ">&quot;woshiyigerxi&#39;anshi&quot;</span><span style="color: rgb(245, 222, 179); ">):</span><br><span style="color: rgb(218, 112, 214); ">52</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: rgb(176, 196, 222); font-weight: bold; ">print</span> <span style="color: rgb(245, 222, 179); ">w</span><br><span style="color: rgb(218, 112, 214); ">53</span> <br><span style="color: rgb(218, 112, 214); ">54</span> <span style="color: rgb(176, 196, 222); font-weight: bold; ">if</span> <span style="color: rgb(245, 222, 179); ">__name__</span> <span style="color: rgb(245, 222, 179); ">==</span> <span style="color: rgb(127, 255, 212); ">&#39;__main__&#39;</span><span style="color: rgb(245, 222, 179); ">:</span><br><span style="color: rgb(248, 16, 176); ">55</span> &nbsp;&nbsp;&nbsp; <span style="color: rgb(245, 222, 179); ">start</span> <span style="color: rgb(245, 222, 179); ">=</span> <span style="color: rgb(245, 222, 179); ">time</span><span style="color: rgb(245, 222, 179); ">.</span><span style="color: rgb(245, 222, 179); ">clock</span>()<br><span style="color: rgb(218, 112, 214); ">56</span> &nbsp;&nbsp;&nbsp; <span style="color: rgb(245, 222, 179); ">main</span>()<br><span style="color: rgb(218, 112, 214); ">57</span> &nbsp;&nbsp;&nbsp; <span style="color: rgb(245, 222, 179); ">end</span> <span style="color: rgb(245, 222, 179); ">=</span> <span style="color: rgb(245, 222, 179); ">time</span><span style="color: rgb(245, 222, 179); ">.</span><span style="color: rgb(245, 222, 179); ">clock</span>()<br><span style="color: rgb(218, 112, 214); ">58</span> &nbsp;&nbsp;&nbsp; <span style="color: rgb(176, 196, 222); font-weight: bold; ">print</span> <span style="color: rgb(127, 255, 212); ">&#39;use time :</span><span style="color: rgb(127, 255, 212); ">%f</span><span style="color: rgb(127, 255, 212); ">&#39;</span> <span style="color: rgb(245, 222, 179); ">%</span> (<span style="color: rgb(245, 222, 179); ">end</span><span style="color: rgb(245, 222, 179); ">-</span><span style="color: rgb(245, 222, 179); ">start</span>)<br></div>

  
